# 复读插件

提供智能复读、排行榜统计和历史记录查询等功能。

## 功能介绍

- 智能复读：按照配置的概率自动复读群内消息，智能过滤不适合复读的消息类型
- 复读排行榜：统计群成员的复读次数和消息数量
- 历史记录查询：查看指定日期的复读数据

## 使用方法

### 基础复读功能

```bash
/复读                                # 查看复读状态
/复读 on                             # 启用复读功能
/复读 off                            # 关闭复读功能
```

### 复读排行榜

```bash
/复读排行榜                          # 查看当前排行榜（默认显示前 3 名）
/rank 5                              # 显示前 5 名
/rank n30                            # 要求至少发送 30 条消息才能上榜
/rank 5n30                           # 显示前 5 名，且要求至少发送 30 条消息
```

### 历史记录查询

```bash
/复读历史 2024                       # 查看指定年份的数据
/history 2024-7                      # 查看指定月份的数据
/history 2024-7-29                   # 查看指定日期的数据
```

## 配置说明

在 `.env` 文件中添加以下配置：

```env
# 复读概率 (1-100)
REPEAT_RATE=10

# 复读间隔 (分钟)
REPEAT_INTERVAL=1

# 排除复读的用户列表 (支持用户名或用户ID)
REPEAT_EXCLUDED_USERS=["bot", "admin", 123456]

# 复读数据刷写间隔 (秒)
REPEAT_FLUSH_INTERVAL=2.0
```

### 配置参数说明

- `REPEAT_RATE`: 复读概率，取值范围 1-100，默认为 10（即 10% 概率）
- `REPEAT_INTERVAL`: 复读间隔，单位分钟，默认为 1 分钟
- `REPEAT_EXCLUDED_USERS`: 排除复读的用户列表，可以是用户名或用户 ID
- `REPEAT_FLUSH_INTERVAL`: 将缓存中的统计数据写入数据库的定时间隔（秒），默认 2 秒，可根据数据库承压能力调整
