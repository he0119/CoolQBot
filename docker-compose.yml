version: "3"
services:

  coolqbot:
    image: he0119/coolqbot:latest
    container_name: coolqbot
    restart: always
    ports:
      - "8080:8080"
    volumes:
      - ./bot:/usr/src/app/bot
    depends_on:
      - cqhttp
      - netease

  netease:
    image: binaryify/netease_cloud_music_api
    container_name: netease
    restart: always
    environment:
      - HOST=0.0.0.0

  cqhttp:
    image: richardchien/cqhttp:4.15.0
    container_name: cqhttp
    restart: always
    ports:
      - "9000:9000"
    environment:
      - VNC_PASSWD=12345687
      - COOLQ_ACCOUNT=2062765419
      - CQHTTP_SERVE_DATA_FILES=true
      - CQHTTP_USE_WS_REVERSE=true
      - CQHTTP_WS_REVERSE_USE_UNIVERSAL_CLIENT=true
      - CQHTTP_WS_REVERSE_URL=ws://coolqbot:8080/ws/
      - CQHTTP_SHOW_LOG_CONSOLE=false
    volumes:
      - ./coolq:/home/user/coolq
